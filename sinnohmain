import random
from datetime import datetime # importing py functions

class Sinnoh:    
    #variable to store which part of the route the user is currently exploring
    user_stored_location = None

    @staticmethod
    def set_route_cardinal_direction_northsouth(current_route):
        """
        Asks user which cardinal direction they are exploring on a route.

        Parameters:
            current_route (str): The route the user is currently exploring.

        Returns:
            None
        """
        while True:
            print(f"Which section of {current_route} are you exploring? ('north', 'south')")
            #converts input to lowercase to match clauses
            cardinality = input().lower()
            #checks for valid input
            if cardinality in ["north", "south"]:
                Sinnoh.user_stored_location = cardinality
                break
            else:
                print("Invalid choice, Please type a cardinal direction. ('north', 'south')")

    @staticmethod
    def set_route_cardinal_direction_eastwest(current_route):
        
        """
        Asks user which cardinal direction they are exploring on a route.

        Parameters:
            current_route (str): The route the user is currently exploring.

        Returns:
            None
        """
        while True:
            print(f"Which section of {current_route} are you exploring? ('east', 'west')")
            cardinality = input().lower()
            if cardinality in ["east", "west"]:
                Sinnoh.user_stored_location = cardinality
                break
            else:
                print("Invalid choice, Please type a cardinal direction. ('east', 'west')")

    @staticmethod
    def grab_user_time():
        """
        Grabs the user's current time and returns a string representing the current time of day.

        Returns:
            str: The current time of day, either "morning", "day", or "night".
        """
        now = datetime.now()    #grabs user datetime from built in py function
        current_hour = now.hour #grabs exact hour and places in current hour

        if 20 <= current_hour or current_hour < 4: #8:00pm to 3:59am
            return "night"
        elif 4 <= current_hour < 10: #4am to 9:59am
            return "morning"
        else:   #10AM to 7:59pm
            return "day"

    @staticmethod
    def encounter_pokemon(route_pokemon):
        """
        Simulates an encounter with a wild pokemon in the Sinnoh region.

        Parameters:
            route_pokemon (dict): A dictionary of pokemon and their encounter rates, with time of day restrictions.

        Returns:
            str: The name of the pokemon that was encountered, or "No Pokemon found" if none were found.
        """
        time_of_day = Sinnoh.grab_user_time()   #grabs user time and stores in time_of_day
        pokemon_found = random.randint(1, 100)  #grabs random percentage and stores in pokemon_found

        for pokemon, (chance, times) in route_pokemon.items(): #goes through list of pokemon based on time of day and chance
            if time_of_day in times and pokemon_found <= chance: #checks if user time of day is equal to pokemon allowed to be out during that time based on the roll of the dice
                return pokemon
            pokemon_found -= chance
        return "No Pokemon found"

    @staticmethod
    def sinnohMain():
        """
        Prompts user to choose a route from Sinnoh and returns the function associated with that route.

        Returns:
        function: The function associated with the route the user selected.
        """
        route_methods = {
            201: Sinnoh.route201,
            202: Sinnoh.route202,
            203: Sinnoh.route203,
            204: Sinnoh.route204,
            205: Sinnoh.route205,
            206: Sinnoh.route206,
            207: Sinnoh.route207,
            208: Sinnoh.route208,
            209: Sinnoh.route209,
            210: Sinnoh.route210,
            211: Sinnoh.route211,
            212: Sinnoh.route212,
            213: Sinnoh.route213,
            214: Sinnoh.route214,
            215: Sinnoh.route215,
            216: Sinnoh.route216,
            217: Sinnoh.route217,
            218: Sinnoh.route218,
            219: Sinnoh.route219,
            220: Sinnoh.route220,
            221: Sinnoh.route221,
            222: Sinnoh.route222,
            223: Sinnoh.route223,
            224: Sinnoh.route224,
            225: Sinnoh.route225,
            226: Sinnoh.route226,
            227: Sinnoh.route227,
            228: Sinnoh.route228,
            229: Sinnoh.route229,
            230: Sinnoh.route230
        }

        #Prompts user to choose a route
        while True:
            try:
                print("Choose a route: \n201 202 203\n204 205 206\n207 208 209\n210 211 212\n213 214 215\n216 217 218\n219 220 221\n222 223 224\n225 226 227\n228 229 230")
                route_choice = int(input("Enter route number: "))

                #grabs route from route_methods
                route = route_methods.get(route_choice)   
                if route:
                    Sinnoh.user_stored_location = None
                    return route
                else:
                    print("Invalid route number. Please choose a valid route.")
            except ValueError:
                #Error checking
                print("Invalid input. Numbers only.")